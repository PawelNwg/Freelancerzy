-- Generated by Oracle SQL Developer Data Modeler 19.2.0.182.1216
--   at:        2020-11-07 11:46:37 CET
--   site:      SQL Server 2012
--   type:      SQL Server 2012



CREATE TABLE category 
    ( categoryid NUMERIC(28) NOT NULL IDENTITY NOT FOR REPLICATION , 
     CategoryName VARCHAR (30) NOT null ) go

ALTER TABLE Category ADD constraint category_pk PRIMARY KEY CLUSTERED (CategoryId)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON ) go

CREATE TABLE credentials (
    userid     NUMERIC(28) NOT NULL,
    password   VARCHAR(200) NOT NULL
)

go 

    


CREATE unique nonclustered index credentials__idx ON credentials ( userid ) go

ALTER TABLE Credentials ADD constraint credentials_pk PRIMARY KEY CLUSTERED (UserId)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON ) go

CREATE TABLE message 
    ( messageid NUMERIC(28) NOT NULL IDENTITY NOT FOR REPLICATION , 
     UserFromId NUMERIC (28) NOT NULL , 
     UserToId NUMERIC (28) NOT NULL , 
     Date DATETIME NOT NULL , 
     Content VARCHAR (250) NOT NULL , 
     Status VARCHAR (20) NOT null ) go

ALTER TABLE Message ADD constraint message_pk PRIMARY KEY CLUSTERED (MessageId)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON ) go

CREATE TABLE messagereport 
    ( reportid NUMERIC(28) NOT NULL IDENTITY NOT FOR REPLICATION , 
     MessageId NUMERIC (28) NOT NULL , 
     ReasonId NUMERIC (28) NOT null ) go

ALTER TABLE MessageReport ADD constraint messagereport_pk PRIMARY KEY CLUSTERED (ReportId)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON ) go

CREATE TABLE offer 
    ( offerid NUMERIC(28) NOT NULL IDENTITY NOT FOR REPLICATION , 
     UserId NUMERIC (28) NOT NULL , 
     CategoryId NUMERIC (28) NOT NULL , 
     Title VARCHAR (40) NOT NULL , 
     Description VARCHAR (250) , 
     CreationDate DATETIME NOT NULL , 
     LastModificationDate DATETIME , 
     ExpirationDate DATETIME NOT NULL , 
     ViewCounter NUMERIC (28) NOT null, wage DECIMAL(28) 
    ) go

ALTER TABLE Offer ADD constraint offer_pk PRIMARY KEY CLUSTERED (OfferId)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON ) go

CREATE TABLE permission 
    ( permissionid NUMERIC(28) NOT NULL IDENTITY NOT FOR REPLICATION , 
     Name VARCHAR (25) NOT null ) go

ALTER TABLE Permission ADD constraint permission_pk PRIMARY KEY CLUSTERED (PermissionId)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON ) go

CREATE TABLE permissionuser (
    userid         NUMERIC(28) NOT NULL,
    permissionid   NUMERIC(28) NOT NULL
)

go

ALTER TABLE PermissionUser ADD constraint permissionuser_pk PRIMARY KEY CLUSTERED (UserId, PermissionId)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON ) go

CREATE TABLE reason 
    ( reasonid NUMERIC(28) NOT NULL IDENTITY NOT FOR REPLICATION , 
     Name VARCHAR (20) NOT
    null,
    description VARCHAR ( 150 )
)
GO

ALTER TABLE Reason ADD constraint reason_pk PRIMARY KEY CLUSTERED (ReasonId)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON ) go

CREATE TABLE "User" 
    ( userid NUMERIC(28) NOT NULL IDENTITY NOT FOR REPLICATION , 
     TypeId NUMERIC (28) NOT NULL , 
     FirstName VARCHAR (20) NOT NULL , 
     Surname VARCHAR (30) NOT NULL , 
     EmailAddress VARCHAR (40) NOT null, phonenumber NUMERIC(28) 
    ) go

ALTER TABLE "User" ADD constraint user_pk PRIMARY KEY CLUSTERED (UserId)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
GO
ALTER TABLE "User" add constraint user__unv2 unique nonclustered ( emailaddress ) go

CREATE TABLE useraddress 
    (
    userid   NUMERIC(28) NOT NULL,
    street   VARCHAR(30) NOT NULL, 
     Number NUMERIC (28) NOT NULL , 
     ApartmentNumber NUMERIC (28) , 
     ZipCode VARCHAR (6) , 
     City VARCHAR (30) NOT NULL 
    )
GO 

    


CREATE unique nonclustered index useraddress__idx ON useraddress ( userid ) go

ALTER TABLE UserAddress ADD constraint useraddress_pk PRIMARY KEY CLUSTERED (UserId)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON ) go

CREATE TABLE usertype 
    ( typeid NUMERIC(28) NOT NULL IDENTITY NOT FOR REPLICATION , 
     Name VARCHAR (20) NOT null ) go

ALTER TABLE UserType ADD constraint usertype_pk PRIMARY KEY CLUSTERED (TypeId)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON ) go

ALTER TABLE Credentials ADD CONSTRAINT credentials_user_fk FOREIGN KEY ( userid )
    REFERENCES ""User"" 
    ( 
     UserId 
    ) 
    ON DELETE CASCADE 
    ON UPDATE no action go

ALTER TABLE Message ADD CONSTRAINT message_user_fk FOREIGN KEY ( userfromid )
    REFERENCES ""User"" 
    ( 
     UserId 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE no action go

ALTER TABLE Message ADD CONSTRAINT message_user_fkv2 FOREIGN KEY ( usertoid )
    REFERENCES ""User"" 
    ( 
     UserId 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE no action go

ALTER TABLE MessageReport
    ADD CONSTRAINT messagereport_message_fk FOREIGN KEY ( messageid )
        REFERENCES message ( messageid )
ON DELETE NO ACTION 
    ON UPDATE no action go

ALTER TABLE MessageReport
    ADD CONSTRAINT messagereport_reason_fk FOREIGN KEY ( reasonid )
        REFERENCES reason ( reasonid )
ON DELETE NO ACTION 
    ON UPDATE no action go

ALTER TABLE Offer
    ADD CONSTRAINT offer_category_fk FOREIGN KEY ( categoryid )
        REFERENCES category ( categoryid )
ON DELETE NO ACTION 
    ON UPDATE no action go

ALTER TABLE Offer ADD CONSTRAINT offer_user_fk FOREIGN KEY ( userid )
    REFERENCES ""User"" 
    ( 
     UserId 
    ) 
    ON DELETE CASCADE 
    ON UPDATE no action go

ALTER TABLE PermissionUser
    ADD CONSTRAINT permissionuser_permission_fk FOREIGN KEY ( permissionid )
        REFERENCES permission ( permissionid )
ON DELETE NO ACTION 
    ON UPDATE no action go

ALTER TABLE PermissionUser ADD CONSTRAINT permissionuser_user_fk FOREIGN KEY ( userid )
    REFERENCES ""User"" 
    ( 
     UserId 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE no action go

ALTER TABLE "User"
    ADD CONSTRAINT user_usertype_fk FOREIGN KEY ( typeid )
        REFERENCES usertype ( typeid )
ON DELETE NO ACTION 
    ON UPDATE no action go

ALTER TABLE UserAddress ADD CONSTRAINT useraddress_user_fk FOREIGN KEY ( userid )
    REFERENCES ""User"" 
    ( 
     UserId 
    ) 
    ON DELETE CASCADE 
    ON UPDATE no action go



-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                            11
-- CREATE INDEX                             2
-- ALTER TABLE                             23
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE DATABASE                          0
-- CREATE DEFAULT                           0
-- CREATE INDEX ON VIEW                     0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE ROLE                              0
-- CREATE RULE                              0
-- CREATE SCHEMA                            0
-- CREATE SEQUENCE                          0
-- CREATE PARTITION FUNCTION                0
-- CREATE PARTITION SCHEME                  0
-- 
-- DROP DATABASE                            0
-- 
-- ERRORS                                   0
-- WARNINGS                                 0
