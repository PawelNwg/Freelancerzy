@model IEnumerable<freelancerzy.Models.UserWithLastMessage> 
@{ 
    ViewData["title"] = "Rozmowy";
}

<div class="container">
    <h2>Wybierz wątek</h2>
    <ul>
        @foreach (var chat in Model.OrderByDescending(m => m.LastMessage.Date))
        {
        <li>
            <a class="text-dark" asp-action="Chat" asp-route-chatId="@chat.ChatId">
                @chat.User.EmailAddress (@chat.User.FirstName @chat.User.Surname)
            </a> <br />
            @if (chat.LastMessage.Seen == true)
            {
                @chat.LastMessage.Date @chat.LastMessage.Content
            }
            else
            {
                @chat.LastMessage.Date <b>@chat.LastMessage.Content</b>
            }
        </li>
        }
    </ul>
    @if (Model.Count() == 0)
    {
        <h1 class="text-danger">Nie masz wątków</h1>
    }
</div>
